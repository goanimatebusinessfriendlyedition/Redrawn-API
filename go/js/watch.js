(function(b){var a=function(c){var d=this;this.$el=c;this.page=0;this.category=c.data("category");this.period=c.data("period");this.lang=c.data("lang");this.subfilter=c.data("subfilter");this.$el.on("click",".watch-filter-dropdown .dropdown-menu a",function(h){var g=b(this);h.preventDefault();if(g.parent().hasClass("active")){return}g.parent().addClass("active").siblings().removeClass("active");g.closest(".watch-filter-dropdown").find(".watch-filter-toggle").html(g.text()+' <span class="caret"></span>');var f=g.closest(".dropdown-menu").data("filter");d[f]=g.data("value");d.page=0;d.getVideos()}).on("click",".pager a",function(g){var f=b(this);g.preventDefault();if(f.parent().hasClass("next")){d.page++}else{d.page--}d.page=Math.max(0,d.page);d.getVideos()})};a.prototype={getVideos:function(){var d=this;var c="/ajax/videos/"+this.category+"/"+this.period+"/"+this.lang;if(""!=this.subfilter){c+="/"+this.subfilter}this.$el.addClass("loading");b.get(c,{page:this.page},function(e){d.$el.removeClass("loading");parseResponse(e);d.$el.find(".watch-videos").html(responseArray.html);d.$el.find(".pager .previous").toggle(d.page>0);d.$el.find(".pager .next").toggle(responseArray.json.next_page=="1");b.scrollTo(d.$el,{duration:200,offset:{top:-50}});resetResponse()})}};new a(b("#results-container"))})(jQuery);